# Dúvidas

## 1. Estrutura da aplicação: qual a melhor abordagem?

a) backend ("bff" + api) em python em 1 CloudRun só e frontend em Vite
b) api em python em CRun privado, e outro CRun (publico) com Nextjs fazendo BFF (pra cuidar de auth (google oauth2, email/senha etc)) bem cm o frontend.

## 2. Supondo que vá com "bff"+api no mesmo backend em python, quais as implicações?

a) o fato de concentrar "api" e "bff" no mesmo endpoint geraria algum problema relevante de seguranca?
b) e como fica questao de CORS?
c) alguma outra desvantagem relavente em relacao ao esquema bff em NextJs?

## Se eu fose de NextJs com BFF separado, como faria a questao do banco de dados?

Só por curiosidade, suponha q eu fosse de NextJs com o BFF dele concentrando a parte do OAuth2 google ou email msm.

Ouvi dizer q haveria 2 abordagens possiveis:

a) bff enxerga banco e escreve o q for nexessario la (user, user_identities, sessions etc)

Alem disso, 2 subpossibildades aqui:

a.1) o bff poderia mexer em schema (prisma etc)

a.2) o esquema so seria mexido pelo lado python (alchemy), d forma q bff so escrevesse em tabelas mediante contrato bem definido entre as "moving partes" (api e bff)

b. bff NAO enxergaria banco: pra email/senha, validaria no python (q conhece users no banco) e geraria e gerwnciaria jwt, cookie etc. Pra oauth2 (google),


Dito isso, qual sua recomendacao supondo q fossemos usar nextjs pra bff+front?

Ou, na verdade, haveria uma terceira possibilidade q vc consideraria melhor?