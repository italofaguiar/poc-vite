## Estrutura da aplicação: qual a melhor abordagem?

1. backend ("bff" + api) em python em 1 CloudRun só e frontend em Vite
2. api em python em CRun privado, e outro CRun (publico) com Nextjs fazendo BFF (pra cuidar de auth (google oauth2, email/senha etc)) bem cm o frontend.

### Resposta (Codex – 17/11/2025)

**Recomendação:** ficar com a opção 1 agora — um único backend FastAPI fazendo API+BFF em um Cloud Run público e o frontend em Vite entregue como estático. Isso mantém todo o domínio onde você já tem maior senioridade (Python), evita duplicar modelos/autenticação entre stacks diferentes e reduz o número de pipelines, deploys e observabilidade que precisarão ser configurados para entregar o MVP em dois meses.

**Consequências práticas:**
- Auth (e-mail/senha e Google) continua centralizada no backend atual, que já está junto do Postgres e do Redis/filas, então session management e auditoria permanecem consistentes; o Vite só consome endpoints e armazena o cookie HttpOnly.
- Uma única superfície pública significa um único load balancer/Cloud Run, o que simplifica billing, IaC e alertas; o Vite pode ser servido via Cloud Run estático ou Cloud Storage + CDN sem lógica server-side.
- Evita retrabalho: quando você contratar o fullstack jr, ele só precisa entender um backend (FastAPI) e um frontend (React/Vite), sem NextJS/BFF em paralelo.

**Quando considerar a opção 2 (NextJS BFF):** se no médio prazo você precisar de rendering no servidor, edge caching, streaming de dados durante SSR ou integrações de auth de terceiros que só entreguem SDKs maduros em NextAuth, aí faz sentido desacoplar. Até lá, a complexidade de operar duas runtimes distintas não fecha a conta frente ao benefício.